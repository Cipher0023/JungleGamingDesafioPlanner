<mxfile host="Electron" version="29.0.3">
  <diagram name="Arquitetura - Challenge Fullstack" id="challenge-architecture">
    <mxGraphModel dx="1800" dy="1200" grid="1" gridSize="10" guides="1" connect="1" arrows="1" page="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- FRONTEND -->
        <mxCell id="frontend" value="Frontend&#10;React + Vite&#10;TanStack Router&#10;Tailwind + shadcn/ui" style="rounded=1;align=center;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="80" y="300" width="260" height="120" as="geometry"/>
        </mxCell>

        <!-- API GATEWAY -->
        <mxCell id="gateway" value="API Gateway&#10;NestJS&#10;JWT Guard&#10;Rate Limit&#10;Swagger" style="rounded=1;align=center;fillColor=#a20025;fontColor=#ffffff;strokeColor=#6F0000;" vertex="1" parent="1">
          <mxGeometry x="420" y="300" width="300" height="140" as="geometry"/>
        </mxCell>

        <!-- AUTH SERVICE -->
        <mxCell id="auth" value="Auth Service&#10;NestJS + TypeORM&#10;Register / Login&#10;Access + Refresh Token" style="rounded=1;align=center;fillColor=#6a00ff;fontColor=#ffffff;strokeColor=#3700CC;" vertex="1" parent="1">
          <mxGeometry x="820" y="140" width="300" height="140" as="geometry"/>
        </mxCell>

        <!-- TASKS SERVICE -->
        <mxCell id="tasks" value="Tasks Service&#10;NestJS + TypeORM&#10;Tasks / Comments&#10;Audit Log" style="rounded=1;align=center;fillColor=#a0522d;fontColor=#ffffff;strokeColor=#6D1F00;" vertex="1" parent="1">
          <mxGeometry x="820" y="380" width="300" height="140" as="geometry"/>
        </mxCell>

        <!-- RABBITMQ -->
        <mxCell id="rabbit" value="RabbitMQ&#10;AMQP Broker&#10;task.created&#10;task.updated&#10;comment.created" style="rounded=1;align=center;fillColor=#ff9800;fontColor=#000000;strokeColor=#cc7a00;" vertex="1" parent="1">
          <mxGeometry x="1180" y="380" width="300" height="140" as="geometry"/>
        </mxCell>

        <!-- NOTIFICATIONS -->
        <mxCell id="notifications" value="Notifications Service&#10;NestJS&#10;Consumes Events&#10;WebSocket Gateway" style="rounded=1;align=center;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1540" y="380" width="320" height="140" as="geometry"/>
        </mxCell>

        <!-- DATABASE -->
        <mxCell id="db" value="PostgreSQL&#10;challenge_db" style="shape=mxgraph.flowchart.database;fillColor=#647687;fontColor=#ffffff;strokeColor=#314354;" vertex="1" parent="1">
          <mxGeometry x="1180" y="140" width="180" height="100" as="geometry"/>
        </mxCell>

        <!-- CONNECTIONS -->
        <mxCell id="e1" edge="1" parent="1" source="frontend" target="gateway" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" edge="1" parent="1" source="gateway" target="auth" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" edge="1" parent="1" source="gateway" target="tasks" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" edge="1" parent="1" source="auth" target="db" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" edge="1" parent="1" source="tasks" target="db" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e6" edge="1" parent="1" source="tasks" target="rabbit" style="endArrow=block;dashed=1;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e7" edge="1" parent="1" source="rabbit" target="notifications" style="endArrow=block;dashed=1;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e8" edge="1" parent="1" source="notifications" target="db" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e9" edge="1" parent="1" source="notifications" target="frontend" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
